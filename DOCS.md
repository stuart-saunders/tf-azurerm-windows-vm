## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | >= 3.30 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | 3.37.0 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [azurerm_network_interface.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_interface) | resource |
| [azurerm_windows_virtual_machine.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/windows_virtual_machine) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_additional_capabilities"></a> [additional\_capabilities](#input\_additional\_capabilities) | Object to enable support for data disks of the `UltraSSD_LRS` storage account type. Defaults to `false`. | <pre>object({<br>    ultra_ssd_enabled = optional(bool, null)<br>  })</pre> | `null` | no |
| <a name="input_additional_unattend_content"></a> [additional\_unattend\_content](#input\_additional\_unattend\_content) | **content**: XML-formatted content that is added to an `unattend.xml` file for the specified path and component<br>**setting**: The name of the setting to which the content applies. Possible values are `AutoLogon` and `FirstLogonCommands`. | <pre>object({<br>    content = string<br>    setting = string<br>  })</pre> | `null` | no |
| <a name="input_admin_password"></a> [admin\_password](#input\_admin\_password) | \_(Required)\_ The password to assign to the VM's Admin user account | `string` | n/a | yes |
| <a name="input_admin_username"></a> [admin\_username](#input\_admin\_username) | The username to assign to the VM's Admin user account. Defaults to `adminuser`. | `string` | `"adminuser"` | no |
| <a name="input_allow_extension_operations"></a> [allow\_extension\_operations](#input\_allow\_extension\_operations) | Allows extension operations on the Virtual Machine | `bool` | `null` | no |
| <a name="input_availability_set_id"></a> [availability\_set\_id](#input\_availability\_set\_id) | Specifies the ID of the Availability Set in which the Virtual Machine should exist | `string` | `null` | no |
| <a name="input_boot_diagnostics"></a> [boot\_diagnostics](#input\_boot\_diagnostics) | Configure a storage account for Boot Diagnostics | <pre>object({<br>    storage_account_uri = optional(string, null)<br>  })</pre> | `null` | no |
| <a name="input_capacity_reservation_group_id"></a> [capacity\_reservation\_group\_id](#input\_capacity\_reservation\_group\_id) | Specifies the ID of the Capacity Reservation Group to which the Virtual Machine should be allocated<br>**NOTE**: Cannot be used with _availability\_set\_id_ or \_proximity\_placement\_group\_id\_ | `string` | `null` | no |
| <a name="input_computer_name"></a> [computer\_name](#input\_computer\_name) | Specifies the Hostname which should be used for this Virtual Machine. <br>If unspecified this defaults to the value for the name field. <br>If the value of the name field is not a valid \_computer\_name\_, then you must specify \_computer\_name\_ | `string` | `null` | no |
| <a name="input_custom_data"></a> [custom\_data](#input\_custom\_data) | The Base64-Encoded Custom Data which should be used for this Virtual Machine | `string` | `null` | no |
| <a name="input_dedicated_host_group_id"></a> [dedicated\_host\_group\_id](#input\_dedicated\_host\_group\_id) | The ID of a Dedicated Host Group that this Windows Virtual Machine should be run within | `string` | `null` | no |
| <a name="input_dedicated_host_id"></a> [dedicated\_host\_id](#input\_dedicated\_host\_id) | The ID of a Dedicated Host on which this machine should be run | `string` | `null` | no |
| <a name="input_edge_zone"></a> [edge\_zone](#input\_edge\_zone) | The Edge Zone within the Azure Region where this Windows Virtual Machine should exist | `string` | `null` | no |
| <a name="input_enable_automatic_updates"></a> [enable\_automatic\_updates](#input\_enable\_automatic\_updates) | Specifies if Automatic Updates are Enabled for the Windows Virtual Machine | `bool` | `null` | no |
| <a name="input_encryption_at_host_enabled"></a> [encryption\_at\_host\_enabled](#input\_encryption\_at\_host\_enabled) | Allows all of the disks (including the temp disk) attached to this Virtual Machine to be encrypted by enabling Encryption at Host | `bool` | `null` | no |
| <a name="input_eviction_policy"></a> [eviction\_policy](#input\_eviction\_policy) | Specifies what should happen when the Virtual Machine is evicted for price reasons when using a Spot instance.<br>Possible values are `Deallocate` and `Delete`.<br>**NOTE**: Can only be configured when priority is set to `Spot`. | `string` | `null` | no |
| <a name="input_extensions_time_budget"></a> [extensions\_time\_budget](#input\_extensions\_time\_budget) | Specifies the duration allocated for all extensions to start.<br>The time duration should be between 15 minutes and 120 minutes (inclusive) and should be specified in ISO 8601 format.<br>Defaults to 90 minutes (`PT1H30M`) | `string` | `null` | no |
| <a name="input_gallery_application"></a> [gallery\_application](#input\_gallery\_application) | **version\_id**: Specifies the Gallery Application Version resource ID<br>**configuration\_blob\_uri**: Specifies the URI to an Azure Blob that will replace the default configuration for the package if provided<br>**order**: Specifies the order in which the packages have to be installed. Possible values are between `0` and `2,147,483,647`.<br>**tag**: Specifies a passthrough value for more generic context. This field can be any valid string value. | <pre>object({<br>    version_id             = string<br>    configuration_blob_uri = optional(string, null)<br>    order                  = optional(string, null)<br>    tag                    = optional(string, null)<br>  })</pre> | `null` | no |
| <a name="input_hotpatching_enabled"></a> [hotpatching\_enabled](#input\_hotpatching\_enabled) | Allows the machine to be patched without requiring a reboot.<br>Can only be enabled if:-<br>  - _patch\_mode_ is set to `AutomaticByPlatform`<br>  - _provision\_vm\_agent_ is set to `true`<br>  - _source\_image\_reference_ references a hotpatching-enabled image<br>  - the VM size is set to a Gen2 VM | `bool` | `null` | no |
| <a name="input_identity"></a> [identity](#input\_identity) | **type**: Specifies the type of Managed Service Identity that should be configured on this VM.<br>    Possible values are `SystemAssigned`, `UserAssigned`, `SystemAssigned, UserAssigned` (to enable both).<br>**identity\_ids**: Specifies a list of User Assigned Managed Identity IDs to be assigned to this VM.<br>**NOTE**: This is required when type is set to `UserAssigned` or `SystemAssigned, UserAssigned`. | <pre>object({<br>    type         = string<br>    identity_ids = optional(list(string))<br>  })</pre> | `null` | no |
| <a name="input_license_type"></a> [license\_type](#input\_license\_type) | Specifies the type of on-premises license which should be used for this Virtual Machine.<br>Possible values are `None`, `Windows_Client` and `Windows_Server`. | `string` | `null` | no |
| <a name="input_location"></a> [location](#input\_location) | The Azure location where the VM should be created. | `string` | n/a | yes |
| <a name="input_max_bid_price"></a> [max\_bid\_price](#input\_max\_bid\_price) | The maximum price you're willing to pay for this Virtual Machine, in US Dollars; which must be greater than the current spot price. If this bid price falls below the current spot price the Virtual Machine will be evicted using the eviction\_policy. Defaults to `-1`, which means that the Virtual Machine should not be evicted for price reasons.<br>**NOTE**: Can only be configured when priority is set to `Spot`. | `string` | `null` | no |
| <a name="input_name"></a> [name](#input\_name) | The name to assign to the VM | `string` | n/a | yes |
| <a name="input_network_interface"></a> [network\_interface](#input\_network\_interface) | The configuration of the Network Interface to be created for this VM.<br>**name**: The optional name for the Network Interface<br>The Network Interface's IP Configuration can be set with the following:-<br>**name**: _(Required)_ The name for this IP Configuration<br>**subnet\_id**: _(Required)_ The ID of the subnet where this Network Interface should be located<br>**private\_ip\_address\_allocation**: _(Required)_ The allocation method used for the Private IP Address. Possible values are `Dynamic` and `Static`.<br>**gateway\_load\_balancer\_fronend\_ip\_configuration\_id**: The Frontend IP Configuration ID of a Gateway SKU Load Balancer<br>**primary**: To identify is this is the Primary IP Configuration<br>**private\_ip\_address**: The static, private IP address for the Network Interface<br>**private\_ip\_address\_version**: The IP Version to use. Possible values are `IPv4` and `IPv6`.<br>**public\_ip\_address\_id**: Reference to a Public IP Address to associate with this NIC | <pre>object({<br>    name = optional(string, null)<br>    ip_configuration = object({<br>      name                          = string<br>      subnet_id                     = string<br>      private_ip_address_allocation = string<br><br>      gateway_load_balancer_frontend_ip_configuration_id = optional(string, null)<br>      primary                                            = optional(bool, null)<br>      private_ip_address                                 = optional(string, null)<br>      private_ip_address_version                         = optional(string, null)<br>      public_ip_address_id                               = optional(string, null)<br>    })<br>  })</pre> | `null` | no |
| <a name="input_network_interface_ids"></a> [network\_interface\_ids](#input\_network\_interface\_ids) | A list of Network Interface Ids which should be attached to this VM | `list(string)` | `[]` | no |
| <a name="input_os_disk"></a> [os\_disk](#input\_os\_disk) | Object to define the OS Disk configuration<br>**caching**: _(Required)_ The Type of Caching which should be used for the Internal OS Disk. Possible values are `None`, `ReadOnly` and `ReadWrite`.<br>**storage\_account\_type**: _(Required)_ The Type of Storage Account which should back this the Internal OS Disk. Possible values are Standard\_LRS, StandardSSD\_LRS, Premium\_LRS, StandardSSD\_ZRS and Premium\_ZRS. <br>**diff\_disk\_settings**: An object to define ephemeral disk settings, containg the following values:-<br>  **option**: _(Required)_ Specifies the Ephemeral Disk Settings for the OS Disk. At this time the only possible value is `Local`.<br>  **placement**: Specifies where to store the Ephemeral Disk. Possible values are `CacheDisk` and `ResourceDisk`. Defaults to `CacheDisk`.<br>**disk\_encryption\_set\_id**: The ID of the Disk Encryption Set which should be used to Encrypt this OS Disk. Conflicts with \_secure\_vm\_disk\_encryption\_set\_id\_.<br>**disk\_size\_gb**: The size of the Internal OS Disk in GB<br>**name**: The name which should be used for the Internal OS Disk<br>**secure\_vm\_disk\_encyption\_set\_id**: The ID of the Disk Encryption Set which should be used to Encrypt this OS Disk when the Virtual Machine is a Confidential VM. Conflicts with \_disk\_encryption\_set\_id\_.<br>**security\_encryption\_type**: Encryption Type when the Virtual Machine is a Confidential VM. Possible values are `VMGuestStateOnly` and `DiskWithVMGuestState`.<br>**write\_accelerator\_enabled**: Specifies if Write Accelerator should be Enabled for this OS Disk | <pre>object({<br>    caching              = string<br>    storage_account_type = string<br><br>    diff_disk_settings = optional(object({<br>      option    = string<br>      placement = optional(string, null)<br>    }), null)<br><br>    disk_encryption_set_id          = optional(string, null)<br>    disk_size_gb                    = optional(string, null)<br>    name                            = optional(string, null)<br>    secure_vm_disk_encyption_set_id = optional(string, null)<br>    security_encryption_type        = optional(string, null)<br>    write_accelerator_enabled       = optional(string, null)<br>  })</pre> | n/a | yes |
| <a name="input_patch_assessment_mode"></a> [patch\_assessment\_mode](#input\_patch\_assessment\_mode) | Specifies the mode of VM Guest Patching for the Virtual Machine. Possible values are `AutomaticByPlatform` or `ImageDefault`. Defaults to `ImageDefault`.<br>**NOTE**: If the _patch\_assessment\_mode_ is set to `AutomaticByPlatform` then the _provision\_vm\_agent_ field must be set to `true`. | `string` | `null` | no |
| <a name="input_patch_mode"></a> [patch\_mode](#input\_patch\_mode) | Specifies the mode of in-guest patching to this Windows Virtual Machine. Possible values are `Manual`, `AutomaticByOS` and `AutomaticByPlatform`. Defaults to `AutomaticByOS`.<br>**NOTE**: If _patch\_mode_ is set to `AutomaticByPlatform` then _provision\_vm\_agent_ must also be set to `true`. If the Virtual Machine is using a hotpatching enabled image the _patch\_mode_ must always be set to `AutomaticByPlatform`. | `string` | `null` | no |
| <a name="input_plan"></a> [plan](#input\_plan) | **name**: Specifies the Name of the Marketplace Image from which this VM should be created<br>**product**: Specifies the Product of the Marketplace Image from which this VM should be created<br>**publisher**: Specifies the Publisher of the Marketplace Image from which this VM should be created | <pre>object({<br>    name      = string<br>    product   = string<br>    publisher = string<br>  })</pre> | `null` | no |
| <a name="input_platform_fault_domain"></a> [platform\_fault\_domain](#input\_platform\_fault\_domain) | Specifies the Platform Fault Domain in which this VM should be created.<br>Defaults to `-1`, which means this will be automatically assigned to a fault domain that best maintains balance across the available fault domains. | `string` | `null` | no |
| <a name="input_priority"></a> [priority](#input\_priority) | Specifies the priority of this VM. Possible values are `Regular` and `Spot`. Defaults to `Regular`. | `string` | `null` | no |
| <a name="input_provision_vm_agent"></a> [provision\_vm\_agent](#input\_provision\_vm\_agent) | Specifies if the Azure VM Agent should be provisioned on this VM | `bool` | `null` | no |
| <a name="input_proximity_placement_group_id"></a> [proximity\_placement\_group\_id](#input\_proximity\_placement\_group\_id) | The Id of the Proximity Placement Group to which the VM should be assigned | `string` | `null` | no |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | \_(Required)\_ The name the Resource Group in which to create the VM | `string` | n/a | yes |
| <a name="input_secret"></a> [secret](#input\_secret) | The certificate object should contain the values:-<br>  **store**: The certificate store on the VM where the certificate should be added<br>  **url**: The Secret URL of a Key Vault Certificate | <pre>object({<br>    certificate = optional(object({<br>      store = string<br>      url   = string<br>    }), null)<br>    key_vault_id = string<br>  })</pre> | `null` | no |
| <a name="input_secure_boot_enabled"></a> [secure\_boot\_enabled](#input\_secure\_boot\_enabled) | Specifies if Secure Boot and Trusted Launch is enabled for the VM | `string` | `null` | no |
| <a name="input_size"></a> [size](#input\_size) | The SKU which should be used for this VM | `string` | n/a | yes |
| <a name="input_source_image_id"></a> [source\_image\_id](#input\_source\_image\_id) | The Id of the Image from which this VM should be created | `string` | `null` | no |
| <a name="input_source_image_reference"></a> [source\_image\_reference](#input\_source\_image\_reference) | **publisher**: The publisher of the image used to create the VM<br>**offer**: The offer of the image used to create the VM<br>**sku**: The SKU of the image used to create the VM<br>**version**: The version of the image used to create the VM | <pre>object({<br>    publisher = string<br>    offer     = string<br>    sku       = string<br>    version   = string<br>  })</pre> | `null` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | A map of the tags that should be applied to the VM | `map(string)` | `null` | no |
| <a name="input_termination_notification"></a> [termination\_notification](#input\_termination\_notification) | **enabled**: enables the termination notification on the VM<br>**timeout: Length of time (in minutes, between 5 and 15) a notification to be sent to the VM on the instance metadata server until the VM gets deleted. The time duration should be specified in ISO 8601 format. Defaults to `PT5M`. | <pre>object({<br>    enabled = bool<br>    timeout = optional(string, null)<br>  })</pre> | `null` | no |
| <a name="input_timezone"></a> [timezone](#input\_timezone) | Specifies the Time Zone which should be used by the VM | `string` | `null` | no |
| <a name="input_user_data"></a> [user\_data](#input\_user\_data) | The Base64-Encoded User Data which should be used for this VM | `string` | `null` | no |
| <a name="input_virtual_machine_scale_set_id"></a> [virtual\_machine\_scale\_set\_id](#input\_virtual\_machine\_scale\_set\_id) | Specifies the Orchestrated Virtual Machine Scale Set in which this VM should be created | `string` | `null` | no |
| <a name="input_vtpm_enabled"></a> [vtpm\_enabled](#input\_vtpm\_enabled) | Specifies if vTPM (virtual Trusted Platform Module) and Trusted Launch is enabled for the VM | `bool` | `null` | no |
| <a name="input_winrm_listener"></a> [winrm\_listener](#input\_winrm\_listener) | **protocol**: Specifies the protocol of listener - possible values are `Http` or `Https`<br>**certificate\_url**: The Secret URL of a Key Vault Certificate, which must be specified when protocol is set to `Https` | <pre>object({<br>    protocol        = string<br>    certificate_url = optional(string, null)<br>  })</pre> | `null` | no |
| <a name="input_zone"></a> [zone](#input\_zone) | The Availability Zone in which this VM should be located | `string` | `null` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | n/a |
| <a name="output_network_interface_id"></a> [network\_interface\_id](#output\_network\_interface\_id) | n/a |
